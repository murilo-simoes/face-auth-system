# ğŸ§  Face Recognition API

API de reconhecimento facial desenvolvida em **Python** utilizando **Flask**, **face_recognition** e **MongoDB Atlas**.  
Permite cadastrar rostos e validar se uma imagem enviada pertence a um rosto jÃ¡ cadastrado.

---

## ğŸš€ Funcionalidades

### 1. Cadastrar rosto

- Endpoint: `POST /register`
- Envia uma imagem em **base64**, nome e nÃ­vel de acesso.
- A API extrai o encoding facial e armazena no banco de dados (MongoDB).
- Se o rosto jÃ¡ estiver cadastrado, retorna um erro.

### 2. Verificar rosto

- Endpoint: `POST /verify`
- Envia uma imagem em **base64**.
- A API compara com todos os rostos cadastrados e retorna:

  ```json
  {
    "nome": "Murilo",
    "nivel": 2
  }
  ```

- Caso o rosto nÃ£o seja identificado:

  ```json
  {
    "erro": "Rosto nÃ£o reconhecido"
  }
  ```

---

## ğŸ§© Estrutura do Projeto

```
face-recognition-api/
â”œâ”€â”€ app.py               # CÃ³digo principal da API Flask
â”œâ”€â”€ database.py          # ConexÃ£o e funÃ§Ãµes do MongoDB
â”œâ”€â”€ utils.py             # FunÃ§Ãµes auxiliares (conversÃ£o base64, encoding, etc)
â”œâ”€â”€ requirements.txt     # DependÃªncias do projeto
â””â”€â”€ README.md            # Este arquivo
```

---

## âš™ï¸ InstalaÃ§Ã£o

### 1ï¸âƒ£ Clonar o repositÃ³rio

```bash
git clone https://github.com/seuusuario/face-recognition-api.git
cd face-recognition-api
```

### 2ï¸âƒ£ Criar e ativar um ambiente virtual (recomendado)

```bash
python -m venv venv
venv\Scripts\activate   # Windows
# ou
source venv/bin/activate  # Linux/Mac
```

### 3ï¸âƒ£ Instalar as dependÃªncias

```bash
pip install -r requirements.txt
```

> Se quiser instalar o Flask manualmente:
>
> ```bash
> pip install flask face_recognition opencv-python pymongo numpy
> ```

---

## â˜ï¸ Configurar MongoDB Atlas

1. Crie uma conta em [https://www.mongodb.com/cloud/atlas](https://www.mongodb.com/cloud/atlas)
2. Crie um **Cluster gratuito**
3. Copie a **connection string**, exemplo:

   ```
   mongodb+srv://usuario:senha@cluster0.mongodb.net/?retryWrites=true&w=majority
   ```

4. Crie um arquivo `.env` e adicione:

   ```
   MONGO_URI=sua_connection_string
   DB_NAME=face_recognition
   ```

---

## ğŸ§  Como Enviar Imagens

Envie o conteÃºdo da imagem em **base64**:

```json
{
  "nome": "Murilo",
  "nivel": 2,
  "imagem_base64": "/9j/4AAQSkZJRgABAQAAAQABAAD..."
}
```

---

## ğŸ§ª Testar com cURL ou Postman

### Cadastrar rosto

```bash
curl -X POST http://127.0.0.1:5000/register \
  -H "Content-Type: application/json" \
  -d "{\"nome\": \"Murilo\", \"nivel\": 2, \"imagem_base64\": \"$(base64 imagem.jpg)\"}"
```

### Verificar rosto

```bash
curl -X POST http://127.0.0.1:5000/verify \
  -H "Content-Type: application/json" \
  -d "{\"imagem_base64\": \"$(base64 imagem_teste.jpg)\"}"
```

---

## â–¶ï¸ Rodar o Servidor

```bash
python app.py
```

A API estarÃ¡ disponÃ­vel em:

```
http://127.0.0.1:5000
```

---

## ğŸ“¦ Exemplo de Resposta

âœ… **Rosto reconhecido**

```json
{
  "nome": "Murilo",
  "nivel": 2
}
```

âŒ **Rosto nÃ£o reconhecido**

```json
{
  "erro": "Rosto nÃ£o reconhecido"
}
```

---

## ğŸ“š DependÃªncias Principais

- **Flask** â€” Framework web para criar a API
- **face_recognition** â€” Biblioteca de reconhecimento facial
- **opencv-python** â€” ManipulaÃ§Ã£o de imagens
- **pymongo** â€” ConexÃ£o com o MongoDB
- **numpy** â€” ManipulaÃ§Ã£o de arrays
- **python-dotenv** â€” Leitura de variÃ¡veis de ambiente

---
